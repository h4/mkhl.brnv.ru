---
id: 539
title: Почему в Тревисе нет (и, возможно, не может быть) кнопки «Стартовать билд»
date: 2013-10-30T23:40:56+03:00
author: h4
layout: revision
guid: http://mkhl.brnv.ru/499-autosave-v1/
permalink: /499-autosave-v1/
---
[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050294.jpg" alt="P1050294" width="1024" height="768" class="alignnone size-full wp-image-505" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050294.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050294-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050294.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050297.jpg" alt="P1050297" width="768" height="1024" class="alignnone size-full wp-image-506" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050297.jpg 768w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050297-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050297.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050304.jpg" alt="P1050304" width="1024" height="578" class="alignnone size-full wp-image-507" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050304.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050304-300x169.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050304.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050308.jpg" alt="P1050308" width="768" height="1024" class="alignnone size-full wp-image-508" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050308.jpg 768w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050308-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050308.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050313.jpg" alt="P1050313" width="1024" height="768" class="alignnone size-full wp-image-509" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050313.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050313-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050313.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050315.jpg" alt="P1050315" width="1024" height="768" class="alignnone size-full wp-image-510" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050315.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050315-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050315.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050320.jpg" alt="P1050320" width="1024" height="768" class="alignnone size-full wp-image-511" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050320.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050320-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050320.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050321.jpg" alt="P1050321" width="768" height="1024" class="alignnone size-full wp-image-512" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050321.jpg 768w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050321-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050321.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050322.jpg" alt="P1050322" width="1024" height="768" class="alignnone size-full wp-image-513" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050322.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050322-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050322.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050324.jpg" alt="P1050324" width="576" height="1024" class="alignnone size-full wp-image-514" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050324.jpg 576w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050324-168x300.jpg 168w" sizes="(max-width: 576px) 100vw, 576px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050324.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050327.jpg" alt="P1050327" width="1024" height="420" class="alignnone size-full wp-image-515" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050327.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050327-300x123.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050327.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050332.jpg" alt="P1050332" width="576" height="1024" class="alignnone size-full wp-image-516" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050332.jpg 576w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050332-168x300.jpg 168w" sizes="(max-width: 576px) 100vw, 576px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050332.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050337.jpg" alt="P1050337" width="463" height="1024" class="alignnone size-full wp-image-517" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050337.jpg 463w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050337-135x300.jpg 135w" sizes="(max-width: 463px) 100vw, 463px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050337.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050343.jpg" alt="P1050343" width="1024" height="768" class="alignnone size-full wp-image-518" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050343.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050343-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050343.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050344.jpg" alt="P1050344" width="1024" height="768" class="alignnone size-full wp-image-519" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050344.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050344-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050344.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050346.jpg" alt="P1050346" width="1024" height="576" class="alignnone size-full wp-image-520" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050346.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050346-300x168.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050346.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050347.jpg" alt="P1050347" width="768" height="1024" class="alignnone size-full wp-image-521" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050347.jpg 768w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050347-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050347.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050349.jpg" alt="P1050349" width="576" height="1024" class="alignnone size-full wp-image-522" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050349.jpg 576w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050349-168x300.jpg 168w" sizes="(max-width: 576px) 100vw, 576px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050349.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050350.jpg" alt="P1050350" width="1024" height="381" class="alignnone size-full wp-image-523" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050350.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050350-300x111.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050350.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050354.jpg" alt="P1050354" width="768" height="1024" class="alignnone size-full wp-image-524" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050354.jpg 768w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050354-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050354.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050357.jpg" alt="P1050357" width="1024" height="768" class="alignnone size-full wp-image-525" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050357.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050357-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050357.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050363.jpg" alt="P1050363" width="768" height="1024" class="alignnone size-full wp-image-526" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050363.jpg 768w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050363-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050363.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050364.jpg" alt="P1050364" width="1024" height="768" class="alignnone size-full wp-image-527" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050364.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050364-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050364.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050366.jpg" alt="P1050366" width="768" height="1024" class="alignnone size-full wp-image-528" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050366.jpg 768w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050366-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050366.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050368.jpg" alt="P1050368" width="768" height="1024" class="alignnone size-full wp-image-529" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050368.jpg 768w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050368-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050368.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050370_.jpg" alt="P1050370_" width="576" height="1024" class="alignnone size-full wp-image-530" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050370_.jpg 576w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050370_-168x300.jpg 168w" sizes="(max-width: 576px) 100vw, 576px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050370_.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050371.jpg" alt="P1050371" width="576" height="1024" class="alignnone size-full wp-image-531" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050371.jpg 576w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050371-168x300.jpg 168w" sizes="(max-width: 576px) 100vw, 576px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050371.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050372.jpg" alt="P1050372" width="1024" height="576" class="alignnone size-full wp-image-532" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050372.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050372-300x168.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050372.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050377.jpg" alt="P1050377" width="1024" height="768" class="alignnone size-full wp-image-533" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050377.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050377-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050377.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050379.jpg" alt="P1050379" width="517" height="1024" class="alignnone size-full wp-image-534" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050379.jpg 517w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050379-151x300.jpg 151w" sizes="(max-width: 517px) 100vw, 517px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050379.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050380.jpg" alt="P1050380" width="1024" height="768" class="alignnone size-full wp-image-535" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050380.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050380-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050380.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050385-300x134.jpg" alt="P1050385" width="300" height="134" class="alignnone size-medium wp-image-536" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050385-300x134.jpg 300w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050385.jpg 1024w" sizes="(max-width: 300px) 100vw, 300px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050385.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050391.jpg" alt="P1050391" width="1024" height="768" class="alignnone size-full wp-image-537" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050391.jpg 1024w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050391-300x225.jpg 300w" sizes="(max-width: 1024px) 100vw, 1024px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050391.jpg)

[<img src="http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050392-300x225.jpg" alt="P1050392" width="300" height="225" class="alignnone size-medium wp-image-538" srcset="https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050392-300x225.jpg 300w, https://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050392.jpg 1024w" sizes="(max-width: 300px) 100vw, 300px" />](http://mkhl.brnv.ru/wp-content/uploads/2013/10/P1050392.jpg)

[Артём Сапегин](http://nano.sapegin.ru/) пожаловался в Твиттере, что совершенно не понимает, почему в [Тревисе](http://travis-ci.org) есть возможность перезапустить имеющийся билд, но нельзя раскатать новый из свежеподключенного проекта. Во всём были обвинены красноглазики, как обычно ;)

Мне же кажется, что проблема в том, что устройство Тревиса не предполагает возможности просто указать «собери мне новый билд». Давайте посмотрим, как работает эта CI-система.

  1. В репозитории появляются новые данные.
  2. Срабатывает хук на стороне Гитхаба, получаем название ветки.
  3. Проверяется наличие файла `travis.yml` в ветке, в которую пришли изменения.
  4. Если такой файл есть — гитхаб стучится в тревис и говорит: «Возьми эту вот ветку и раскатай по ней тесты».
  5. Тревис начинает работать.

Хук с новыми данными на стороне Гитхаба первичен, поэтому в [документации](http://about.travis-ci.org/docs/user/getting-started/) сказано: «сначала подключаем хук, потом проталкиваем в репозиторий коммит с travis.yml».

Предположим, что мы решили-таки сделать кнопку «стартовать новый билд». Тогда нам нужно дать ответ на вопрос: «Из какой ветки стартовать?». Например, на сайте одной конференции ветка `master` не содержит и, возможно ещё долго не будет содержать, файла для тревиса, тесты есть только в ветке разработчиков. Да вообще, ветки `master` может не быть в принципе. Поэтому нужен какой-то интерфейс, в котором будут перечисляться все ветки, (а также все пулл-реквесты), имеющиеся в репозитории. Технически, используя api гитхаба это несложно сделать. Но нужно ли? Будет ли этот интерфейс понятен и удобен? Как часто он будет востребован (ответ — очень редко, только если ты не читал документацию).

Нет, красноглазики конечно виноваты, ведь один из них придумал [unix way](http://ru.wikipedia.org/wiki/%D0%A4%D0%B8%D0%BB%D0%BE%D1%81%D0%BE%D1%84%D0%B8%D1%8F_UNIX), а другой [import this](http://habrahabr.ru/post/51125/). И следуя им работает Тревис.