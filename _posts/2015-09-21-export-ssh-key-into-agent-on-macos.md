---
id: 685
title: Автоматический импорт ssh-ключа в ssh-agent в МacOS
date: 2015-09-21T12:29:22+03:00
author: h4
layout: post
guid: http://mkhl.brnv.ru/?p=685
permalink: /export-ssh-key-into-agent-on-macos/
categories:
  - Записи
---
Фронтендеры у нас в Эдстере работают с виртуалками, с доступом по ssh. На этих виртуалках мы собираем всю статику и иногда нужно делать полную сборку проекта, включая выкачивание библиотек из приватного гитхаб-репозитория.

Чтобы не заморачиваться с прописыванием ключей к гитхабу на виртуалке — включён проброс ключей. Однако на MacOS загрузка ключа в ssh-agent через \`$ ssh-add\` почему-то работает только до перезагрузки системы. Потом нужно снова загрузить ключ.

Перезагружаюсь я редко, но всё равно каждый раз раздражался от необходимости этого лишнего действия. Прописывание команды в \`~/.zshrc\` не давало нужного результата и так я мучаюсь уже больше полугода. Правильнее сказать — мучился.

Сегодня копнул чуть глубже и нашёл простое рабочее решение. Нужно импортировать ключ в Keychain. Для этого достаточно эту команду в терминале:

<pre>$ ssh-add -K [path/to/private SSH key]</pre>

Перезагрузился, проверил — ключ успешно импортировался в ssh-agent:

<pre>$ ssh-add -l
2048 96:0d:e8:f3:ed:c7:a1:b5:39:a7:a8:f7:13:6c:96:62 /Users/h4/.ssh/id_rsa (RSA)</pre>